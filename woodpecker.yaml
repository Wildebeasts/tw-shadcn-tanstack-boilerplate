steps:
  - name: install nodejs
    image: bash
    commands:
      - curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
      - export NVM_DIR="$HOME/.nvm" # Or wherever nvm is installed
      - '[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"' # This loads nvm
      - '[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"' # This loads nvm bash_completion
      - nvm install node # Installs the latest version of Node.js
      - nvm use node
      - node -v
      - npm -v
      - corepack enable pnpm
      - pnpm install
      - pnpm build
      - pm2 delete BJ_FE
      - pm2 start serve --name BJ_FE -- -s ./Bean-Journal-Web-FE/dist/ -l 3000
